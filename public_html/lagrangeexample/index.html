<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Lagrangian Mechanics | Ryan Guy's Portfolio</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />

        <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300'>
        <link rel='stylesheet' href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700&subset=latin,greek-ext">
        <link rel="stylesheet" href="../css/basic.css">

        <style>
            img.indent {
                position: relative;
                left: 40px;
            }

            div.indent {
                position: relative;
                left: 40px;
            }

            img.indent_large {
                position: relative;
                left: 140px;
            }       
        </style>

        <script type="text/javascript" async
            src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
        </script>

        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
            jax: ["input/TeX","output/HTML-CSS"],
            displayAlign: "left"
            });
        </script>
    </head>

    <body>
        <div class="header">
            <div class="header_name">
                <a class="header_name" href="../index.html">RLGUY</a>
            </div>

            <div class="header_links">
                <ul>
                    <li class="header_link"><a class="header_link" href="../index.html">Home</a> </li>
                    <li class="header_link"><a class="header_link" href="../portfolio/index.html">Portfolio</a></li> 
                    <li class="header_link"><a class="header_link" href="../projects/index.html">Projects</a></li> 
                    <!--<li class="header_link"><a class="header_link" href="../resume/index.html">Resume</a> </li>-->
                    <li class="header_link"><a class="header_link" href="mailto:ryan.l.guy@gmail.com">Contact</a></li>
                </ul>
            </div>
            <hr>

            <div class="icon_links">
                <ul>
                    <li><a class="icon_github" href="https://github.com/rlguy" target="_blank"></a></li>
                    <li><a class="icon_youtube" href="https://www.youtube.com/c/rlguyportfolio" target="_blank"></a></li>
                </ul>
            </div>
        </div>
        <br><br>

        <div class="center_column">

            <h1>Lagrangian Mechanics Example</h1>

            <p>This program simulates the motion of a simple pendulum whose base is
            driven horizontally by \(x = a\sin wt\). The simulation is written in C++ and
            uses the QT application framework.</p>

            <img src="images/diagram.gif" alt="Pendulum System"><br><br>

            <h2>Lagrangian System Derivation</h2>

            <p>Consider a pendulum of mass \(m\) and length \(l\) whose base is
            driven horizontally by \(x=a\sin wt\). For this system, we will choose 
            the angle \(\theta\) as the single generalized coordinate and develop the Lagrangian
            Equation of Motion:</p>

            <div class="indent">
                $$ {\large \frac{\partial L}{\partial \theta} - 
                \frac{d}{dt} \frac{\partial L}{\partial \dot{\theta}} = 0 } $$
            </div>

            <p>Where \(L\) is the Lagrange function and \(T\) and \(U\) are the
            the total kinetic energy and total potential energy of the system.</p>

            <div class="indent">
                $$ {\large L = T - U } $$
            </div>

            <p>We know the position of the base at any time in the simulation, so</p>

            <div class="indent">
                $$ {\large\begin{align} x_0 & = a\sin\left ( wt \right ) \\ 
                y_0 & = 0 \end{align} } $$
            </div>

            <p>Where \(a\) is the horizontal amplitude of motion and \(w\) is the
            speed of the motion. We can find the position of the mass with</p>

            <div class="indent">
                $$ {\large\begin{align} x_1 & = x_0 + l\sin\left ( \theta \right ) = 
                a\sin\left ( wt \right )+l\sin\left ( wt \right ) \\ 
                y_1 & = y_0-l\cos\left ( \theta \right )=-l\cos\left ( \theta \right ) \end{align} } $$
            </div>

            <p>where \(l\) is the length of the pendulum and \(\theta\) is the angle of the
            pendulum as in the system diagram above. We can differentiate the position
            of the mass to find its velocity. Theta is a function of time, so remember
            to apply the chain rule when differentiating the expression.</p>

            <div class="indent">
                $$ {
                    \large
                    \begin{align} 
                        \dot{x_1} & = aw\cos\left ( wt \right )+l\dot{\theta}\cos\left ( \theta \right ) \\ 
                        \dot{y_1} & = l\dot{\theta}\sin\left ( \theta \right ) 
                    \end{align} 
                } $$
            </div>

            <p>Now that we know the velocity of the mass, we can find the total kinetic
            energy of the system</p>

            <div class="indent">
                $$ {\large
                    \begin{align} 
                        T & = \frac{1}{2}m\left ( \dot{x_1}^2 + \dot{y_1}^2 \right ) \\ 
                        T & = \frac{1}{2}a^2mw^2\cos^2\left ( wt \right ) +
                        a\dot{\theta}lmw\cos\left ( \theta \right )\cos\left ( wt \right ) +
                        \frac{1}{2}\dot{\theta}^2l^2m\sin^2\left ( \theta \right ) +
                        \frac{1}{2}\dot{\theta}^2l^2m\cos^2\left ( \theta \right ) 
                    \end{align} 
                } $$
            </div>

            <p>where \(m\) is the mass of the pendulum. Note that the above expression
            can been simplified by using the following trigonometry identity:</p>

            <div class="indent">
                $$ {\large \sin^2\left ( \theta \right ) + \cos^2(\theta) = 1 } $$
            </div>

            <p>And T becomes:</p>

            <div class="indent">
            $$ {\large 
                T = \frac{1}{2}a^2mw^2\cos^2\left ( wt \right ) +
                a\dot{\theta}lmw\cos\left ( \theta \right )\cos\left ( wt \right ) +
                \frac{1}{2}\dot{\theta}^2l^2m 
            } $$
            </div>

            <p>The total potential energy of the system is then</p>

            <div class="indent">
                $$ {\large U = mgy_1 = -mgl\cos\left ( \theta \right ) } $$
            </div>

            <p>And now we have the Lagrange function for this system.</p>

            <div class="indent">
                $$ {\large
                    \begin{align} 
                        L = & \frac{1}{2}a^2mw^2\cos^2\left ( wt \right ) +
                        a\dot{\theta}lmw\cos\left ( \theta \right )\cos\left ( wt \right ) + \\ & \frac{1}{2}\dot{\theta}^2l^2m\sin^2\left ( \theta \right )
                        + \frac{1}{2}\dot{\theta}l^2m\cos^2\left ( \theta \right ) +
                        mgl\cos\left ( \theta \right ) 
                    \end{align} 
                } $$
            </div>

            <p>Differentiate <i><b>L</b></i> with respect to theta and we get</p>

            <div class="indent">
                $$ {\large 
                    \frac{\partial L}{\partial \theta} = 
                    -a\dot{\theta}lmw\sin\left ( \theta \right )\cos\left ( wt \right ) -
                    mgl\sin\left ( \theta \right ) 
                } $$
            </div>

            <p>Differentiate <i><b>L</b></i> with respect to the angular velocity and we get</p>

            <div class="indent">
            $$ {\large \frac{\partial L}{\partial \dot{\theta}} = 
            almw\cos\left ( \theta \right )\cos\left ( wt \right ) +
            l^2m\dot{\theta} } $$
            </div>

            <p>Differentiate the above expression with respect to time and we get</p>

            <div class="indent">
                $$ {\large 
                    \frac{d}{dt}\frac{\partial L}{\partial \dot{\theta}} = 
                    -a\dot{\theta}lmw\sin\left ( \theta \right )\cos\left ( wt \right ) - 
                    almw^2\cos\left ( \theta \right )\sin\left ( wt \right ) +
                    l^2m\ddot{\theta} 
                } $$
            </div>

            <p>Now we can plug the above derivatives into the Lagrange equation of motion</p>

            <div class="indent">
                $$ {\large 
                    \frac{\partial L}{\partial \theta} - 
                    \frac{d}{dt} \frac{\partial L}{\partial \dot{\theta}} = 
                    -mgl\sin\left ( \theta \right ) +
                    almw^2\cos\left ( \theta \right )\sin\left ( \theta \right ) -
                    l^2m\ddot{\theta} 
                } $$
            </div>

            <p>And solve for the angular acceleration</p>

            <div class="indent">
            $$ {\large 
                \ddot{\theta} = \frac{almw^2\cos\left ( \theta \right )
                \sin\left ( wt \right ) - 
                mgl\sin\left ( \theta \right )}{l^2m} 
            } $$
            </div>

            <p>In the simulation, we can integrate the above expression to find the
            angular velocity and integrate further to find the angular position.</p>

            <div align="center"><img src="images/animation.gif" alt="simulation"></div><br><br>

            <h2>User Interface</h2>

            <p>The simulation program uses the QT application framework to provide a
            graphical interface for the user. This interface allows the user to change 
            the initial pendulum angle, the pendulum length and mass, and the speed and 
            amplitude of horizontal motion.</p>

            <div align="center"><img src="images/interface.png" alt="GUI" width="600"></div><br><br>

            <h2>Download</h2>

            <p><b>Download for QT 5.3.0:</b> 
            <a href="downloads/lagrange_pendulum_qt.zip" target="_blank">Lagrange Pendulum Simulation</a></p>

            <b>Source: </b><a href="https://github.com/rlguy/lagrangependulum">
            https://github.com/rlguy/lagrangependulum</a>

        </div>

        <div class="blank"></div>

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-73726729-1', 'auto');
            ga('send', 'pageview');
        </script>

    </body>
</html>
